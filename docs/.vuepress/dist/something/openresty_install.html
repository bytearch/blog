<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>openresty源码安装教程 | BYTEARCH</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="
1. 下载源代码

wget https://github.com/openresty/openresty/releases/download/v1.15.8.3/openresty-1.15.8.3.tar.gz
##解压
tar -zxf openresty-1.15.8.3.tar.gz
##进入安装目录
cd openresty-1.15.8.3
 ...">
    <link rel="preload" href="/assets/css/0.styles.d8562eb7.css" as="style"><link rel="preload" href="/assets/js/app.c314f9ee.js" as="script"><link rel="preload" href="/assets/js/6.09e13c8a.js" as="script"><link rel="preload" href="/assets/js/10.d22b012d.js" as="script"><link rel="preload" href="/assets/js/15.d525b472.js" as="script"><link rel="prefetch" href="/assets/js/11.c4a01b9e.js"><link rel="prefetch" href="/assets/js/12.0beb10ee.js"><link rel="prefetch" href="/assets/js/13.5a5aa710.js"><link rel="prefetch" href="/assets/js/14.9c230b88.js"><link rel="prefetch" href="/assets/js/16.8029f07f.js"><link rel="prefetch" href="/assets/js/17.0b69f25b.js"><link rel="prefetch" href="/assets/js/18.4956fad6.js"><link rel="prefetch" href="/assets/js/19.6e359b5e.js"><link rel="prefetch" href="/assets/js/20.326d7eec.js"><link rel="prefetch" href="/assets/js/21.01fe1373.js"><link rel="prefetch" href="/assets/js/22.2078e537.js"><link rel="prefetch" href="/assets/js/23.b22c15d3.js"><link rel="prefetch" href="/assets/js/3.40a5a29a.js"><link rel="prefetch" href="/assets/js/4.3ee86ef9.js"><link rel="prefetch" href="/assets/js/5.3c6be164.js"><link rel="prefetch" href="/assets/js/7.5ba497d8.js"><link rel="prefetch" href="/assets/js/8.d0152445.js"><link rel="prefetch" href="/assets/js/9.a692c7c0.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.fb29f47e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d8562eb7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">BYTEARCH </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">首页</a></li><li class="nav-item"><a href="/tag/" class="nav-link">标签</a></li><li class="nav-item"><a href="/about.html" class="nav-link">关于我</a></li><li class="nav-item"><a href="https://www.github.com/bytearch" target="_blank" rel="noopener noreferrer" class="nav-link external">GitHub</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">BYTEARCH </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">首页</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">标签</a></li><li class="mobile-nav-item"><a href="/about.html" class="nav-link">关于我</a></li><li class="mobile-nav-item"><a href="https://www.github.com/bytearch" target="_blank" rel="noopener noreferrer" class="nav-link external">GitHub</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div><div class="content__default"><h1 id="openresty源码安装教程"><a href="#openresty源码安装教程" class="header-anchor">#</a> openresty源码安装教程</h1> <h2 id="_1-下载源代码"><a href="#_1-下载源代码" class="header-anchor">#</a> 1. 下载源代码</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> https://github.com/openresty/openresty/releases/download/v1.15.8.3/openresty-1.15.8.3.tar.gz
<span class="token comment">##解压</span>
<span class="token function">tar</span> -zxf openresty-1.15.8.3.tar.gz 
<span class="token comment">##进入安装目录</span>
<span class="token builtin class-name">cd</span> openresty-1.15.8.3
</code></pre></div><h2 id="_2-编译前准备"><a href="#_2-编译前准备" class="header-anchor">#</a> 2.编译前准备</h2> <p>openresty依赖openssl,pcre库，没有安装的话需要安装一下</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">##Mac系统安装如下</span>
brew <span class="token function">install</span> pcre openssl luajit
</code></pre></div><h2 id="_3-编译安装"><a href="#_3-编译安装" class="header-anchor">#</a> 3 .编译安装</h2> <div class="language-shell extra-class"><pre class="language-shell"><code>./configure    --with-cc-opt<span class="token operator">=</span><span class="token string">&quot;-I/usr/local/opt/openssl/include/ -I/usr/local/opt/pcre/include/ -I/usr/local/opt/luajit/include&quot;</span>    --with-ld-opt<span class="token operator">=</span><span class="token string">&quot;-L/usr/local/opt/openssl/lib/ -L/usr/local/opt/pcre/lib/ -L/usr/local/opt/luajit/lib&quot;</span>    -j8
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><h2 id="_4-加入环境变量"><a href="#_4-加入环境变量" class="header-anchor">#</a> 4. 加入环境变量</h2> <p>openresty默认安装在/usr/local/openresty目录(也可以在编译的时候--prefix指定路径)</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#加入环境变量</span>
<span class="token function">vim</span> ~/.bash_profile
<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/local/openresty/bin:<span class="token environment constant">$PATH</span>:.
<span class="token builtin class-name">export</span> <span class="token environment constant">PATH</span>
<span class="token builtin class-name">source</span> ~/.bash_profile

<span class="token comment">##执行openresty -V 可以看到默认安装的模块</span>
yarw@yarw openresty-1.15.8.3$ openresty -V
nginx version: openresty/1.15.8.3
built by clang <span class="token number">10.0</span>.0 <span class="token punctuation">(</span>clang-1000.10.44.4<span class="token punctuation">)</span>
built with OpenSSL <span class="token number">1.0</span>.2s  <span class="token number">28</span> May <span class="token number">2019</span>
TLS SNI support enabled
configure arguments: --prefix<span class="token operator">=</span>/usr/local/openresty/nginx --with-cc-opt<span class="token operator">=</span><span class="token string">'-O2 -I/usr/local/opt/openssl/include/ -I/usr/local/opt/pcre/include/ -I/usr/local/opt/luajit/include'</span> --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/ngx_devel_kit-0.3.1rc1 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/echo-nginx-module-0.61 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/xss-nginx-module-0.06 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/ngx_coolkit-0.2 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/set-misc-nginx-module-0.32 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/form-input-nginx-module-0.12 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/encrypted-session-nginx-module-0.08 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/srcache-nginx-module-0.31 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/ngx_lua-0.10.15 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/ngx_lua_upstream-0.07 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/headers-more-nginx-module-0.33 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/array-var-nginx-module-0.05 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/memc-nginx-module-0.19 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/redis2-nginx-module-0.15 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/redis-nginx-module-0.3.7 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/rds-json-nginx-module-0.15 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/rds-csv-nginx-module-0.09 --add-module<span class="token operator">=</span><span class="token punctuation">..</span>/ngx_stream_lua-0.0.7 --with-ld-opt<span class="token operator">=</span><span class="token string">'-Wl,-rpath,/usr/local/openresty/luajit/lib -L/usr/local/opt/openssl/lib/ -L/usr/local/opt/pcre/lib/ -L/usr/local/opt/luajit/lib'</span> --with-stream --with-stream_ssl_module --with-stream_ssl_preread_module --with-http_ssl_module
</code></pre></div><h2 id="_5-启动openresty"><a href="#_5-启动openresty" class="header-anchor">#</a> 5.启动openresty</h2> <div class="language-shell extra-class"><pre class="language-shell"><code>openresty -c /usr/local/openresty/nginx/conf/nginx.conf
<span class="token comment">##执行curl请求 可以看到安装成功</span>
yarw@yarw openresty-1.15.8.3$ <span class="token function">curl</span> http://localhost/
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Welcome to OpenResty<span class="token operator">!</span><span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
    body <span class="token punctuation">{</span>
        width: 35em<span class="token punctuation">;</span>
        margin: <span class="token number">0</span> auto<span class="token punctuation">;</span>
        font-family: Tahoma, Verdana, Arial, sans-serif<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span>/style<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>Welcome to OpenResty<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>If you see this page, the OpenResty web platform is successfully installed and
working. Further configuration is required.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>For online documentation and support please refer to
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;https://openresty.org/&quot;</span><span class="token operator">&gt;</span>openresty.org<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>br/<span class="token operator">&gt;</span>
Commercial support is available at
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;https://openresty.com/&quot;</span><span class="token operator">&gt;</span>openresty.com<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>em<span class="token operator">&gt;</span>Thank you <span class="token keyword">for</span> flying OpenResty.<span class="token operator">&lt;</span>/em<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
</code></pre></div></div></div></div> <footer class="footer" data-v-6ff6859a><div class="footer-left-wrap" data-v-6ff6859a><ul class="contact" data-v-6ff6859a><li class="contact-item" data-v-6ff6859a><a href="https://github.com/bytearch/blog" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-6ff6859a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-6ff6859a><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-6ff6859a></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-6ff6859a><ul class="copyright" data-v-6ff6859a><li class="copyright-item" data-v-6ff6859a><a href="http://www.bytearch.com" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-6ff6859a>Copyright © 2020 浅谈架构 | 京ICP备20016259号-1</a></li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c314f9ee.js" defer></script><script src="/assets/js/6.09e13c8a.js" defer></script><script src="/assets/js/10.d22b012d.js" defer></script><script src="/assets/js/15.d525b472.js" defer></script>
  </body>
</html>
